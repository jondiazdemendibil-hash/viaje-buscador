        .vw-buscador * {
            margin: 0;
            padding:  0;
            box-sizing: border-box;
        }

        .vw-buscador {
            scroll-behavior: smooth;
        }

        .vw-buscador {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .vw-buscador {
            font-family: 'Spectral', serif;
            background:  #f5f5f5;
            color: #1a1a1a;
            margin: 0;
            padding: 0;
        }

        .vw-buscador::-webkit-scrollbar {
            display: none;
        }

        .vw-buscador input, .vw-buscador button, .vw-buscador textarea, .vw-buscador select {
            font-family: inherit;
        }

        .vw-buscador input, .vw-buscador button, .vw-buscador textarea, .vw-buscador select {
            font-family: inherit;
        }

        .vw-buscador .container {
            width: 100%;
            padding: 0;
            margin: 0;
        }

        /* ═══════════════════════════════════════════════════════
           CABECERA (BREADCRUMBS + TÍTULO)
           ═══════════════════════════════════════════════════════ */
        .header-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 32px 24px;
            position: sticky;
            top: 0;
            z-index: 100;
            background: #fff;
        }

        /* Barra de resultados (Screen 2) */
        .header-bar-results {
            display: none;
            position: sticky;
            top: 0;
            z-index: 100;
            background: #fff;
            padding: 32px 24px;
        }

        .header-bar-results.visible {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
        }

        .header-title-stack {
            flex: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 6px;
            min-width: 0;
            justify-self: center;
        }

        .header-bar-results .breadcrumbs {
            justify-self: start;
        }

        .header-bar-results .header-spacer {
            justify-self: end;
        }

        /* ═══════════════════════════════════════════════════════
           SCREEN 2: Layout 60/40 (Resultados + Mapa)
           Selectores reales del DOM:
             screen2Root  = #screen2 (.screen-2)
             titleBar     = #headerBarResults (.header-bar-results)
             layoutWrap   = .results-layout (hijo directo de #screen2)
             resultsCol   = .vw-s2-left (hijo directo de .results-layout)
             mapCol       = aside.vw-s2-right (hijo directo de .results-layout)
             mapInner     = #resultsMap (.results-map)
           ═══════════════════════════════════════════════════════ */
        @media (min-width: 1024px) {
            /* --- body: bloquear scroll global --- */
            body.vw-screen2-active {
                overflow: hidden !important;
            }

            /* --- Screen 2 root: ocupa exactamente el espacio restante del viewport --- */
            body.vw-screen2-active .vw-buscador .screen-2,
            body.vw-screen2-active .vw-buscador #screen2 {
                overflow: hidden !important;
                height: calc(100vh - var(--vw-screen2-titlebar-h, 100px)) !important;
                min-height: 0 !important;
                max-height: calc(100vh - var(--vw-screen2-titlebar-h, 100px)) !important;
                padding: 0 !important;
                margin: 0 !important;
                box-sizing: border-box !important;
            }

            /* --- Layout wrapper: 2 columnas 3fr/2fr --- */
            body.vw-screen2-active .vw-buscador #screen2 .results-layout {
                display: grid !important;
                grid-template-columns: 3fr 2fr !important;
                gap: 0 !important;
                height: 100% !important;
                width: 100% !important;
                max-width: none !important;
                overflow: hidden !important;
                min-height: 0 !important;
                padding: 0 !important;
                margin: 0 !important;
                box-sizing: border-box !important;
                align-items: stretch !important;
            }

            /* --- Columna izquierda (resultados): scroll interno sin barra visible --- */
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-left {
                height: 100% !important;
                min-height: 0 !important;
                min-width: 0 !important;
                overflow-y: auto !important;
                overflow-x: hidden !important;
                overscroll-behavior: contain;
                padding: 0 16px 0 24px !important;
                scrollbar-width: none;           /* Firefox */
                -ms-overflow-style: none;        /* IE/Edge legacy */
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-left::-webkit-scrollbar {
                display: none;                   /* Chrome/Safari/Edge */
            }

            /* El grid-container dentro ya NO necesita flex/sizing propio */
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-left .results-grid-container {
                flex: none !important;
                max-width: none !important;
                width: 100% !important;
                height: auto !important;
                overflow: visible !important;
                position: static !important;
                padding: 0 !important;
                background: transparent !important;
            }

            /* Grid de cards: 2 columnas */
            body.vw-screen2-active .vw-buscador #screen2 .results-grid {
                display: grid !important;
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                gap: 16px !important;
                height: auto !important;
                overflow: visible !important;
                padding: 0 !important;
            }

            /* --- Columna derecha (mapa): sin padding, sin gap, borde a borde --- */
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right {
                height: 100% !important;
                min-height: 0 !important;
                min-width: 0 !important;
                overflow: hidden !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right .results-map-container {
                flex: none !important;
                max-width: none !important;
                width: 100% !important;
                height: 100% !important;
                overflow: hidden !important;
                position: static !important;
                top: auto !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 0 !important;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right .results-map,
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right #resultsMap {
                display: block !important;
                width: 100% !important;
                height: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 0 !important;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right .map-placeholder {
                width: 100% !important;
                height: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 0 !important;
            }
        }

        /* --- Mobile/tablet: apilado, scroll normal --- */
        @media (max-width: 1023px) {
            body.vw-screen2-active {
                overflow: visible !important;
            }

            .vw-buscador #screen2 .results-layout {
                display: flex !important;
                flex-direction: column !important;
                gap: 16px !important;
                height: auto !important;
                width: 100% !important;
            }

            .vw-buscador #screen2 .vw-s2-left,
            .vw-buscador #screen2 .vw-s2-right {
                height: auto !important;
                overflow: visible !important;
                position: static !important;
            }

            .vw-buscador #screen2 .vw-s2-right .results-map-container,
            .vw-buscador #screen2 .vw-s2-right .results-map,
            .vw-buscador #screen2 .vw-s2-right #resultsMap {
                height: 360px !important;
            }
        }

        .breadcrumbs {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: nowrap;
            overflow: hidden;
            min-width: 0;
            font-size: clamp(12px, 2.6vw, 13px);
            color: #666;
        }

        .breadcrumbs .crumbs-inner {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            min-width: 0;
        }

        .breadcrumbs a,
        .breadcrumbs span,
        .breadcrumbs strong {
            font-size: inherit;
            color: inherit;
            text-decoration: none;
        }

        .breadcrumbs a:hover {
            color: #1a1a1a;
        }

        .crumbs-sep {
            margin: 0 4px;
            color: #aaa;
        }

        .breadcrumbs a.crumb-action {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: #1e6bd6;
            text-decoration: none;
            transition: color 0.2s ease, opacity 0.2s ease;
        }

        .breadcrumbs a.crumb-action:hover {
            color: #004499;
            text-decoration: underline;
        }

        .breadcrumbs a.crumb-action:active {
            opacity: 0.85;
        }

        .crumb-action-icon {
            font-size: 0.95em;
        }

        .screen2-title {
            font-size: clamp(18px, 4.8vw, 24px);
            font-weight: 600;
            color: #1a1a1a;
            line-height: 1.2;
            text-align: center;
            width: 100%;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .screen2-meta {
            font-size: clamp(12px, 3.0vw, 14px);
            color: #666;
            text-align: center;
            width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .results-query,
        .results-total {
            font-size: inherit;
            font-weight: inherit;
            color: inherit;
        }

        /* Ocultar barra original cuando se muestran resultados */
        .header-bar.hidden {
            display: none;
        }

        .breadcrumbs {
            margin: 0;
            padding: 0;
            text-align: left;
        }

        /* ═══════════════════════════════════════════════════════
           TÍTULO
           ═══════════════════════════════════════════════════════ */
        .vw-buscador h1.page-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin: 0;
            padding: 0;
            text-align: center;
            flex: 1;
        }

        .header-bar-results .page-title {
            flex: 0;
            width: 100%;
        }

        .header-spacer {
            flex: 1;
        }

        /* ═══════════════════════════════════════════════════════
           SCREEN 1 (BUSCADOR + CARRUSEL)
           ═══════════════════════════════════════════════════════ */
        .screen-1 {
            height: 100vh;
            max-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .screen-1-content {
            flex: 1;
            display: flex;
            gap: 0;
            overflow: hidden;
        }

        .search-column {
            width: 60%;
            padding: 24px 48px;
            overflow: hidden;
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 12vh;
        }

        .carousel-column {
            width: 40%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .carousel-title {
            font-family: 'Spectral', Georgia, serif;
            font-style: italic;
            font-weight: 300;
            color: #000;
            font-size: 1.1rem;
            text-align: center;
            margin: 0;
            padding: 0 20px;
            letter-spacing: 0.3px;
            position: absolute;
            top: 20%;
            left: 0;
            right: 0;
        }

        .carousel-pagination {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            position: absolute;
            bottom: 18%;
            left: 0;
            right: 0;
        }

        .carousel-dots {
            display: flex;
            gap: 8px;
            align-items: center;
            justify-content: center;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #888;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-dot:hover {
            background: #999;
        }

        .carousel-dot.active {
            background: #333;
            transform: scale(1.2);
        }

        .carousel-counter {
            font-family: 'Spectral', Georgia, serif;
            font-size: 0.95rem;
            color: #555;
            letter-spacing: 0.5px;
        }

        /* ═══════════════════════════════════════════════════════
           BUSCADOR (IZQUIERDA)
           ═══════════════════════════════════════════════════════ */
        .search-section {
            background: white;
            border-radius: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            padding: 24px;
        }

        /* TABS */
        .search-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 120px;
            border-bottom: 2px solid #e5e5e5;
            justify-content: center;
        }

        .tab-button {
            padding: 16px 24px;
            background: #f5f5f5;
            border: 2px solid #e5e5e5;
            border-bottom: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: -2px;
            white-space: nowrap;
            position: relative;
            flex: 1;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .tab-button:hover {
            background: #e8e8e8;
            color: #333;
        }

        .tab-button.active {
            background-color: #e8f4fc;
            color: #1a73e8;
            border-color: #1a73e8;
            border-bottom: 2px solid white;
            z-index: 1;
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.15);
        }

        .tab-count {
            display: inline-block;
            margin-left: 8px;
            padding: 4px 10px;
            background-color: #f0f0f0;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            color: #666;
        }

        .tab-button.active .tab-count {
            background-color: #1a73e8;
            color: white;
        }

        /* SELECTOR MÓVIL DE TABS */
        .mobile-tab-selector {
            display: none;
            position: relative;
            margin-bottom: 16px;
        }

        .mobile-tab-button {
            width: 100%;
            padding: 14px 16px;
            background: white;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .mobile-tab-button:hover {
            border-color: #ccc;
            background: #f9f9f9;
        }

        .mobile-tab-button.open {
            border-color: #0066cc;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .mobile-tab-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #0066cc;
            border-top: none;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }

        .mobile-tab-dropdown.open {
            display: block;
        }

        .mobile-tab-option {
            padding: 14px 16px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }

        .mobile-tab-option:last-child {
            border-bottom: none;
        }

        .mobile-tab-option:hover {
            background: #f5f5f5;
        }

        .mobile-tab-option.active {
            background: #e6f2ff;
            color: #0066cc;
            font-weight: 600;
        }

        .mobile-tab-option .tab-count {
            display: inline-block;
            padding: 2px 6px;
            background: #e0e0e0;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 600;
            color: #666;
        }

        .mobile-tab-option.active .tab-count {
            background: #0066cc;
            color: white;
        }

        /* INPUTS PRINCIPALES */
        .primary-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom:  16px;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            font-weight:  600;
            color: #444;
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius:  8px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #0066cc;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        /* BOTÓN FILTROS */
        .btn-filters {
            width: 100%;
            padding:  12px 24px;
            background: white;
            border: 2px solid #ddd;
            border-radius:  8px;
            font-size: 1rem;
            font-weight: 600;
            color: #444;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 16px;
        }

        .btn-filters:hover {
            border-color: #0066cc;
            color: #0066cc;
        }

        /* BÚSQUEDA SECUNDARIA */
        .secondary-search {
            padding-top: 16px;
            border-top: 1px solid #e5e5e5;
            position: relative;
            min-height: 200px;
        }

        .secondary-search label {
            display: block;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
        }

        .search-help-text {
            display: none;
            font-family: 'Spectral', serif;
            font-style: italic;
            font-weight: 200;
            font-size: clamp(1.125rem, 2vw + 0.5rem, 1.75rem);
            line-height: 1.35;
            color: #1a1a1a;
            text-align: center;
            max-width: 720px;
            margin: 28px auto 18px;
            padding: 0;
            background: none;
            border: none;
            box-shadow: none;
            letter-spacing: 0.01em;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .search-section:has(.tab-button.active[data-tab="todo"]) .search-help-text--todo {
            display: block;
        }

        .search-section:has(.tab-button.active[data-tab="lugar"]) .search-help-text--lugar {
            display: block;
        }

        .search-section:has(.tab-button.active[data-tab="actividad"]) .search-help-text--actividad {
            display: block;
        }

        .search-input-wrapper {
            position: relative;
            width: 100%;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }

        /* WP-15: evitar superposición lupa/texto en la barra principal (Screen 1) */
        .vw-buscador .search-input-wrapper .search-icon {
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
        }

        .vw-buscador .search-input-wrapper #searchInput.keyword-input {
            padding-left: 52px;
        }

        /* Chip de búsqueda confirmada */
        .search-locked-chip {
            display: none;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            padding: 6px 10px;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #333;
            width: fit-content;
        }

        .search-locked-chip.visible {
            display: flex;
        }

        .search-locked-chip-text {
            font-weight: 500;
        }

        .search-locked-chip-close {
            background: none;
            border: none;
            color: #666;
            font-size: 1.1rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }

        .search-locked-chip-close:hover {
            color: #333;
        }

        .keyword-input {
            width: 100%;
            padding: 16px 20px 16px 48px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: calc(1rem + 3px);
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .keyword-input:focus {
            outline:  none;
            border-color: #1a73e8;
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.15);
        }

        .search-input-wrapper input:focus {
            border-color: #1a73e8;
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.15);
            outline: none;
        }

        /* WP-14: color de acento del buscador (azul). Fallback si Avada no expone variable */
        .vw-buscador { --vw-accent: var(--awb-link-color, #1e73be); }

        /* WP-14: barra de búsqueda principal (Screen 1) */
        .vw-buscador #searchInput {
            border-color: var(--vw-accent);
        }

        .vw-buscador #searchInput:focus {
            border-color: var(--vw-accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(30, 115, 190, 0.25);
        }

        /* BOTÓN X LIMPIAR */
        .clear-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #e5e5e5;
            border: none;
            width: 24px;
            height: 24px;
            border-radius:  50%;
            cursor: pointer;
            font-size: 1.1rem;
            color: #666;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .clear-button:hover {
            background:  #d0d0d0;
            color: #333;
        }

        .clear-button.visible {
            display: flex;
        }

        /* DROPDOWN SUGERENCIAS */
        .suggestions-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 350px;
            overflow-y:  auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none;
            z-index: 1000;
            margin-top: -8px;
        }
        /* Mega-dropdown (solo en 'Buscar todo') */
        .suggestions-dropdown.mega {
            max-height: 50vh;
            overflow: hidden;
            padding: 14px 14px 12px 14px;
            border-top: 2px solid #ddd;
        }
        .suggestions-dropdown.mega .mega-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 14px;
        }
        .suggestions-dropdown.mega .mega-col {
            min-width: 0;
            border-right: 1px solid #eee;
            padding-right: 12px;
        }
        .suggestions-dropdown.mega .mega-col:last-child {
            border-right: none;
            padding-right: 0;
        }
        .suggestions-dropdown.mega .mega-title {
            font-size: 0.78rem;
            font-weight: 700;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            color: #666;
            margin: 2px 0 8px 0;
        }
        .suggestions-dropdown.mega .mega-empty {
            color: #bbb;
            font-size: 0.85rem;
            padding: 6px 2px;
            font-style: italic;
            text-align: center;
        }
        .suggestions-dropdown.mega .mega-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .suggestions-dropdown.mega .suggestion-item {
            border-radius: 6px;
        }
        .suggestions-dropdown.mega .no-results {
            padding: 18px;
        }


        .suggestions-dropdown.visible {
            display: block;
        }

        .suggestion-category {
            padding: 8px 16px;
            background: #f9f9f9;
            font-size: 0.75rem;
            font-weight:  700;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-top: 1px solid #e5e5e5;
        }

        .suggestion-category:first-child {
            border-top: none;
        }

        .suggestion-item {
            padding: 10px 16px;
            cursor: pointer;
            transition: background 0.15s;
            font-size: 0.9rem;
            color: #333;
            border-bottom: 1px solid #f5f5f5;
        }

        .suggestion-item:hover {
            background: #f5f5f5;
        }

        .suggestion-item.selected {
            background: #f0f0f0;
            border-left: 3px solid #0066cc;
        }

        .highlight {
            font-weight: 700;
            color: #0066cc;
        }

        .highlight-grid {
            font-weight: 600;
            text-decoration-line: underline;
            text-decoration-style: wavy;
            text-decoration-color: #777;
            text-decoration-thickness: 1px;
            text-underline-offset: 3px;
            text-decoration-skip-ink: auto;
        }

        .no-results {
            padding: 20px 16px;
            text-align:  center;
            color: #999;
            font-size: 0.9rem;
        }

        .no-results-title {
            font-weight: 600;
            color:  #666;
            margin-bottom: 4px;
        }

        /* HINT TECLADO */
        .keyboard-hint {
            text-align: right;
            font-size: 0.8rem;
            color: #999;
            margin-top: 8px;
        }

        .kbd {
            display: inline-block;
            padding: 2px 6px;
            background: #f0f0f0;
            border:  1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size:  0.75rem;
        }

        /* ═══════════════════════════════════════════════════════
           TAB FECHA - CONTROLES PREMIUM
           ═══════════════════════════════════════════════════════ */
        .date-search-controls {
            display: none;
            margin-top: 20px;
        }

        .date-search-controls.visible {
            display: block;
        }

        /* Texto premium (solo visible en Tab Fecha) */
        .fecha-instructions {
            display: none;
            font-family: 'Spectral', serif;
            font-style: italic;
            font-weight: 200;
            font-size: clamp(1.125rem, 2vw + 0.5rem, 1.75rem);
            line-height: 1.35;
            color: #1a1a1a;
            text-align: center;
            max-width: 720px;
            margin: 28px auto 18px;
            padding: 0;
            background: none;
            border: none;
            box-shadow: none;
            letter-spacing: 0.01em;
            flex-direction: column;
            gap: 10px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .fecha-instructions.visible {
            display: flex;
        }

        .fecha-instructions > div {
            font-weight: 200;
        }

        .fecha-instructions .no-italic {
            font-style: normal;
            font-weight: 300;
        }

        .fecha-instructions .fecha-line2 {
            white-space: nowrap;
            letter-spacing: 0.15px;
            font-size: inherit;
        }

        /* Ocultar input principal y label en Tab Fecha */
        .secondary-search.date-active #searchLabel,
        .secondary-search.date-active #searchInputWrapper {
            display: none;
        }

        .date-inputs-wrapper {
            display: flex;
            gap: 24px;
            align-items: flex-start;
            justify-content: center;
            max-width: 520px;
            margin: 0 auto;
        }

        .date-input-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            flex: 1;
        }

        .date-input-group label {
            font-size: 0.9rem;
            color: #555;
            font-weight: 500;
            font-family: 'Spectral', Georgia, serif;
            line-height: 1.4;
            margin-bottom: 6px;
            display: block;
        }

        .fecha-hint {
            font-family: 'Spectral', Georgia, serif;
            font-size: 0.85rem;
            color: #3d3d3d;
            text-align: center;
            margin-top: 6px;
            letter-spacing: 0.01em;
            min-height: 1.1em;
        }

        .date-input {
            width: 100%;
            height: 48px;
            padding: 12px 14px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            color: #1a1a1a;
            transition: border-color 0.2s ease;
            font-family: 'Spectral', Georgia, serif;
            background: white;
            cursor: pointer;
            box-sizing: border-box;
        }

        .date-input:hover {
            border-color: #bbb;
        }

        .date-input:focus {
            outline: none;
            border-color: #2c5aa0;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }

        /* Estilo del calendario nativo */
        .date-input::-webkit-calendar-picker-indicator {
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.2s ease;
        }

        .date-input::-webkit-calendar-picker-indicator:hover {
            opacity: 1;
        }

        /* ═══════════════════════════════════════════════════════
           MAPA (DERECHA)
           ═══════════════════════════════════════════════════════ */
        .map-section {
            background: white;
            border-radius: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            height: 100%;
            min-height: 450px;
            overflow: hidden;
            position: sticky;
            top: 0;
            display: none;
        }

        .map-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .map-icon {
            font-size: 3rem;
            margin-bottom: 12px;
        }

        #mobileMapArea {
            display: none;
        }

        #mapMobileWrapper {
            display: none;
            min-height: 0;
            height: auto;
        }

        /* BOTÓN VER MAPA (solo visible en móvil cuando hay resultados) */
        .map-toggle-button {
            display: none; /* Oculto por defecto en desktop */
            width: 100%;
            padding: 14px 16px;
            background: white;
            border: 2px solid #0066cc;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #0066cc;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 12px;
            text-align: center;
        }

        .map-toggle-button:hover {
            background: #f0f7ff;
        }

        .map-toggle-button.active {
            background: #0066cc;
            color: white;
        }


        /* ═══════════════════════════════════════════════════════
           RESULTADOS (ABAJO - ANCHO COMPLETO)
           ═══════════════════════════════════════════════════════ */
        .results-section {
            background: white;
            padding: 24px 20px;
            border-radius: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-top: 0;
            display: flex;
            flex-direction: column;
            /* max-height eliminado para evitar scroll interno */
            display: none;
        }

        .results-header {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e5e5;
            display: none;
        }

        .results-header.visible {
            display: block;
        }

        .results-count {
            font-size: 0.95rem;
            color: #666;
        }

        .count-number {
            font-weight: 600;
            color:  #1a1a1a;
            font-size: 1.1rem;
        }

        .locked-indicator {
            font-size: 0.85rem;
            color: #888;
            margin-left: 8px;
            font-weight: 400;
            display: none;
        }

        .locked-indicator.visible {
            display: inline;
        }

        .search-time {
            font-size: 0.85rem;
            color: #999;
            margin-left: 8px;
        }

        .refine-hint {
            font-size: 0.85rem;
            color: #666;
            margin-top: 4px;
            display: none;
        }

        .refine-hint.visible {
            display: block;
        }

        /* ESTADO VACÍO INICIAL */
        .results-empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
            font-size: 0.95rem;
            font-style: italic;
        }

        .results-empty-state.hidden {
            display: none;
        }

        .result-title {
            font-size: 1.3rem;
            font-weight:  600;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .result-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 0.85rem;
            color: #1a1a1a;
            margin-bottom: 12px;
            justify-content: center;
        }

        .result-description {
            font-size: 0.9rem;
            color: #555;
            line-height: 1.5;
            margin-bottom: 12px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-clamp: 3;
        }

        .date-result-card {
            display: flex;
            gap: 24px;
            align-items: flex-start;
            justify-content: center;
            max-width: 520px;
            margin: 0 auto;
            margin-bottom: 6px;
            font-style: italic;
        }

        .date-result-line2 {
            font-size: 0.95rem;
            color: #1a1a1a;
        }

        /* ═══════════════════════════════════════════════════════
           TAB LUGAR - CAJAS DE PERIODO
           ═══════════════════════════════════════════════════════ */
        .period-block{
          grid-column: 1 / -1;
          border: 1px solid #e5e5e5;
          border-radius: 8px;
          padding: 20px;
          margin-bottom: 28px;
          background: #fafafa;
          transition: all 0.2s ease;
        }

        .period-block:hover{
          border-color: #d0d0d0;
          box-shadow: 0 4px 12px rgba(0,0,0,0.06);
          background: #f5f5f5;
        }

        .period-block:last-child{
          margin-bottom: 0;
        }

        .period-header{
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 8px;
          margin-bottom: 24px;
          padding-bottom: 20px;
          border-bottom: 1px solid #e0e0e0;
          text-align: center;
        }

        .period-title{
          font-family: 'Spectral', Georgia, serif;
          font-size: 1.3rem;
          font-weight: 600;
          color: #1a1a1a;
          letter-spacing: 0.3px;
          line-height: 1.4;
        }

        .period-date-long{
          font-family: 'Spectral', Georgia, serif;
          font-size: 1rem;
          font-weight: 400;
          color: #666;
          font-style: italic;
          line-height: 1.5;
        }

        .period-grid{
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
        }

        /* Responsive */
        @media (max-width: 1024px){
          .period-grid{ grid-template-columns: repeat(2, 1fr); gap: 18px; }
        }
        @media (max-width: 599px){
          .period-header{ gap: 6px; margin-bottom: 20px; padding-bottom: 16px; }
          .period-title{ font-size: 1.1rem; }
          .period-date-long{ font-size: 0.9rem; }
          .period-grid{ grid-template-columns: 1fr; gap: 16px; }
        }

        /* ═══════════════════════════════════════════════════════
           GRUPOS DE UBICACIÓN (TAB LUGAR) - DEPRECATED (eliminados)
           ═══════════════════════════════════════════════════════ */
        /* CSS de agrupación eliminado: .location-group, .location-group-header, 
           .location-name, .location-count, .location-windows, .location-group-grid, 
           .location-group-toggle ya no se utilizan tras volver a grid plano */

        /* ═══════════════════════════════════════════════════════
           RESPONSIVE
           ═══════════════════════════════════════════════════════ */
        @media (max-width: 768px) {
            .screen-1 {
                overflow-x: hidden;
            }

            .screen-1-content {
                flex-direction: column;
            }

            .search-column {
                width: 100%;
                order: 1;
            }

            .carousel-column {
                width: 100%;
                max-width: 100%;
                order: 2;
                min-height: 300px;
                padding-top: 16px;
                --carousel-gutter: clamp(16px, 5vw, 24px);
                padding-left: var(--carousel-gutter);
                padding-right: var(--carousel-gutter);
                box-sizing: border-box;
                margin-left: auto;
                margin-right: auto;
                overflow: visible;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                gap: 10px;
            }

            .carousel-title {
                position: static;
                transform: none;
                margin: 14px 0 10px;
                text-align: center;
                width: 100%;
                font-size: clamp(0.95rem, 3.2vw, 1.1rem);
            }

            .carousel-3d {
                --card-w: clamp(240px, 72vw, 320px);
                --card-h: clamp(180px, 54vw, 240px);
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                height: auto;
                margin-top: 0;
                margin-left: auto;
                margin-right: auto;
            }

            .carousel-stack {
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
            }

            .carousel-pagination {
                position: static;
                transform: none;
                margin: 10px 0 18px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 6px;
            }

            .carousel-dots {
                margin-top: 0;
            }

            .carousel-counter {
                margin-top: 0;
            }

            .carousel-3d .carousel-card .carousel-card-content {
                top: auto !important;
                bottom: 0 !important;
                left: 0;
                right: 0;
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
                padding: 12px 14px !important;
                gap: 6px !important;
            }

            .carousel-3d .carousel-card .carousel-card-title {
                font-size: clamp(18px, 4.8vw, 24px) !important;
                line-height: 1.15;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            .carousel-3d .carousel-card .carousel-card-line {
                font-size: clamp(12px, 3.3vw, 14px) !important;
                line-height: 1.25;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            .carousel-card-content {
                top: auto;
                left: 0;
                right: 0;
                bottom: 0;
                padding: 12px 14px;
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
                gap: 6px;
            }

            .carousel-card-title {
                font-size: clamp(18px, 4.8vw, 24px);
                line-height: 1.15;
            }

            .carousel-card-line {
                font-size: clamp(12px, 3.3vw, 14px);
                line-height: 1.25;
            }

            .carousel-3d .carousel-card .carousel-card-content {
                top: auto !important;
                bottom: 0 !important;
                left: 0;
                right: 0;
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
                padding: 12px 14px !important;
                gap: 6px !important;
            }

            .carousel-3d .carousel-card .carousel-card-title {
                font-size: clamp(18px, 4.8vw, 24px) !important;
                line-height: 1.15;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            .carousel-3d .carousel-card .carousel-card-line {
                font-size: clamp(12px, 3.3vw, 14px) !important;
                line-height: 1.25;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 100%;
            }

            /* Botón de mapa visible solo en móvil */
            .map-toggle-button {
                display: none; /* Se controla con JS cuando hay resultados en Tab Fecha */
            }

            .map-toggle-button.visible {
                display: block;
            }

            /* Mapa colapsable en móvil */
            #mobileMapArea {
                display: none;
            }

            #mobileMapArea.visible {
                display: block;
                margin: 0 0 16px;
            }

            #mapMobileWrapper {
                display: block;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }

            #mapMobileWrapper.is-open {
                max-height: 360px;
            }

            #mapMobileWrapper .map-placeholder {
                min-height: 320px;
            }

            .desktop-map {
                display: none;
            }

            .header-bar {
                flex-direction: column;
                align-items: stretch;
                gap: 6px;
                padding: 10px 16px 8px 16px;
            }

            .breadcrumbs {
                font-size: clamp(12px, 2.6vw, 13px);
            }

            .header-bar-results {
                padding: 10px 16px 8px 16px;
            }

            .page-title {
                flex: none;
                font-size: 1.5rem;
                text-align: center;
            }

            .header-spacer {
                display: none;
            }

            .search-section {
                padding: 20px 16px;
            }

            .results-section {
                padding: 20px 16px;
            }

            .primary-inputs {
                grid-template-columns: 1fr;
            }

            .search-tabs {
                display: none;
            }

            .mobile-tab-selector {
                display: block;
            }

            /* Mega-dropdown en 1 columna apilada para móvil */
            .suggestions-dropdown.mega {
                max-height: 50vh;
                overflow-y: auto;
            }

            .suggestions-dropdown.mega .mega-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .suggestions-dropdown.mega .mega-col {
                border-right: none;
                padding-right: 0;
                border-bottom: 1px solid #eee;
                padding-bottom: 16px;
            }

            .suggestions-dropdown.mega .mega-col:last-child {
                border-bottom: none;
                padding-bottom: 0;
            }

            .keyboard-hint {
                display: none;
            }

            /* Tab Fecha: inputs apilados en móvil */
            .date-inputs-wrapper {
                flex-direction: column;
                gap: 16px;
                max-width: none;
            }

            .date-input-group {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .fecha-instructions {
                max-width: 92%;
                margin-left: auto;
                margin-right: auto;
                font-size: clamp(18px, 4.2vw, 24px);
                line-height: 1.25;
                white-space: normal;
                overflow-wrap: anywhere;
            }

            .fecha-instructions > div,
            .fecha-instructions .fecha-line2 {
                white-space: normal;
            }

            /* PASO 6: Ajustes finos ≤480px */

            /* Fichas de resultado: altura automática, no aspect-ratio fijo */
            .result-card {
                aspect-ratio: auto !important;
                height: auto !important;
                min-height: 200px;
            }

            .result-card-content {
                position: relative !important;
                inset: auto !important;
                padding: 16px !important;
            }

            /* Barra Screen 1: título sin position absolute */
            .header-bar:not(.header-bar-results) .page-title {
                position: static !important;
                transform: none !important;
                text-align: center !important;
                font-size: 1.4rem !important;
                max-width: 100% !important;
                width: 100% !important;
            }

            /* Barra Screen 2: más compacta */
            .header-bar-results.visible {
                padding: 10px 12px !important;
                gap: 6px !important;
            }

            .header-bar-results .header-title-stack .page-title {
                font-size: 1.15rem !important;
            }

            .header-bar-results .screen2-meta {
                font-size: 0.8rem !important;
            }

            /* Breadcrumbs más pequeños */
            .breadcrumbs {
                font-size: 11px !important;
            }

            /* Selector móvil de tabs: más compacto */
            .mobile-tab-button {
                padding: 12px 14px !important;
                font-size: 0.9rem !important;
            }

            /* Input: ligeramente más compacto */
            .keyword-input {
                padding: 12px 36px 12px 40px !important;
                font-size: 0.95rem !important;
            }

            /* PARCHE: Carrusel más compacto en iPhone SE */
            .carousel-3d {
                --card-w: clamp(200px, 65vw, 280px) !important;
                --card-h: clamp(130px, 40vw, 180px) !important;
            }

            .carousel-column {
                min-height: 220px !important;
                gap: 6px !important;
                padding-bottom: 20px !important;
            }

            .carousel-title {
                font-size: clamp(0.85rem, 3vw, 0.95rem) !important;
                margin: 8px 0 6px !important;
            }

            .carousel-pagination {
                margin: 6px 0 12px !important;
                gap: 4px !important;
            }

            .carousel-dot {
                width: 8px !important;
                height: 8px !important;
            }

            .carousel-counter {
                font-size: 0.85rem !important;
            }
        }

        /* ═══════════════════════════════════════════════════════
           CARRUSEL 3D DE FICHAS
           ═══════════════════════════════════════════════════════ */
        .carousel-3d-section {
            margin-top: 0;
            padding-top: 0;
            border-top: 1px solid #e5e5e5;
        }

        .carousel-3d {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            position: relative;
            overflow: visible;
            user-select: none;
            --card-w: 520px;
            --card-h: 390px;
        }

        .carousel-stack {
            position: relative;
            width: var(--card-w);
            height: var(--card-h);
            margin: 0 auto;
            perspective: 1200px;
            transform-style: preserve-3d;
            transform: none;
            overflow: visible;
        }

        .carousel-card {
            position: absolute;
            top: 50%;
            left: 50%;
            width: min(var(--card-w), 90vw);
            height: min(var(--card-h), 60vw);
            border-radius: 20px;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            transform: translate(-50%, -50%);
            transform-style: preserve-3d;
            transition: transform 500ms ease, opacity 500ms ease, filter 500ms ease, box-shadow 500ms ease;
            will-change: transform, opacity, filter;
            box-shadow: 0 12px 28px rgba(0,0,0,0.2);
        }

        .carousel-card::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(
                to bottom,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,0) 0%,
                rgba(0,0,0,0.92) 95%,
                rgba(0,0,0,1) 100%
            );
            pointer-events: none;
        }

        .carousel-card.is-active {
            z-index: 10;
            opacity: 1;
            box-shadow: 0 20px 50px rgba(0,0,0,0.35);
        }

        .carousel-card-content {
            position: absolute;
            left: 0;
            right: 0;
            top: calc(33.333% + 100px);
            bottom: 0;
            padding: 18px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            gap: 10px;
            z-index: 1;
            color: #fff;
        }

        .carousel-card-title {
            font-size: 30px;
            font-weight: 700;
            line-height: 1.08;
            margin: 0;
            letter-spacing: 0.2px;
            text-shadow: 0 6px 22px rgba(0,0,0,0.55);
        }

        .carousel-card-line {
            font-size: 16px;
            font-weight: 400;
            line-height: 1.35;
            margin: 0;
            opacity: 0.98;
            text-shadow: 0 6px 22px rgba(0,0,0,0.55);
        }

        .carousel-card-controls {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 200ms ease;
        }

        .carousel-card.is-active .carousel-card-controls {
            opacity: 1;
        }

        .carousel-nav-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 6px;
            background: rgba(0,0,0,0.5);
            display: grid;
            place-items: center;
            cursor: pointer;
            pointer-events: auto;
            transition: opacity 200ms ease, filter 200ms ease;
        }

        .carousel-nav-btn:hover {
            opacity: 0.85;
            filter: brightness(1.05);
        }

        .carousel-nav-btn:focus-visible {
            outline: 2px solid #fff;
            outline-offset: 2px;
        }

        .carousel-nav-btn svg {
            width: 30px;
            height: 30px;
            stroke: #fff;
            stroke-width: 2.5;
            fill: none;
        }

        /* ═══════════════════════════════════════════════════════
           RESPONSIVE - GRID DE RESULTADOS
           ═══════════════════════════════════════════════════════ */
        
        /* Tablets grandes y desktop pequeño: 3 columnas */
        @media (max-width: 1024px) {
            .results-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Tablets y móviles grandes (481px - 768px): 2 columnas */
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
        }

        /* Móviles pequeños (≤480px): 1 columna para mejor legibilidad */
        @media (max-width: 480px) {
            .results-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }

        /* ═══════════════════════════════════════════════════════
           RESPONSIVE - CARRUSEL DE RECOMENDACIONES
           ═══════════════════════════════════════════════════════ */
        
        /* Carrusel: 1 card por página en móvil (≤768px) */
        @media (max-width: 768px) {
            .recommendations-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .recommendations-navigation {
                gap: 12px;
            }

            .nav-arrow {
                font-size: 1rem;
                padding: 4px 6px;
            }

            .nav-dot {
                width: 6px;
                height: 6px;
            }
        }

        /* ═══════════════════════════════════════════════════════
           FIX: REFUERZO DE ESTILOS DEL CARRUSEL
           (Garantiza que las cards se vean correctamente)
           ═══════════════════════════════════════════════════════ */
        
        /* Asegurar que el grid se muestre correctamente */
        .recommendations-grid {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 16px !important;
            margin-bottom: 16px !important;
            width: 100%;
        }

        /* Asegurar que las cards sean bloques con estilo */
        .recommendation-card {
            display: block !important;
            border: 1px solid #e0e0e0 !important;
            border-radius: 8px !important;
            padding: 20px !important;
            background: white !important;
            transition: all 0.2s !important;
            cursor: pointer !important;
            text-align: center !important;
            text-decoration: none !important;
            color: inherit !important;
            box-sizing: border-box !important;
        }

        .recommendation-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08) !important;
            transform: translateY(-2px) !important;
            border-color: #ccc !important;
        }

        /* Asegurar elementos internos de las cards */
        .recommendation-title {
            display: block !important;
            font-size: 1.1rem !important;
            font-weight: 600 !important;
            color: #1a1a1a !important;
            margin-bottom: 8px !important;
        }

        .recommendation-subtitle {
            display: block !important;
            font-size: 0.85rem !important;
            color: #666 !important;
            margin-bottom: 12px !important;
        }

        .recommendation-text {
            display: block !important;
            font-size: 0.9rem !important;
            color: #888 !important;
            line-height: 1.4 !important;
            font-style: italic !important;
        }

        /* Asegurar navegación visible */
        .recommendations-navigation {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 16px !important;
        }

        .nav-arrow {
            display: inline-block !important;
            background: none !important;
            border: none !important;
            font-size: 1.2rem !important;
            color: #0066cc !important;
            cursor: pointer !important;
            padding: 4px 8px !important;
        }

        .nav-dots {
            display: flex !important;
            gap: 8px !important;
        }

        .nav-dot {
            display: block !important;
            width: 8px !important;
            height: 8px !important;
            border-radius: 50% !important;
            background: #ddd !important;
            cursor: pointer !important;
        }

        .nav-dot.active {
            background: #0066cc !important;
        }

        /* Indicador visible */
        .recommendations-indicator {
            display: block !important;
            font-size: 0.85rem !important;
            color: #999 !important;
            text-align: center !important;
            margin-top: 12px !important;
        }

        /* Móvil: 1 card por página */
        @media (max-width: 768px) {
            .recommendations-grid {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }

            .nav-arrow {
                font-size: 1rem !important;
            }

            .nav-dot {
                width: 6px !important;
                height: 6px !important;
            }
        }

        /* ═══════════════════════════════════════════════════════════════════════
           SCREEN 2: RESULTADOS
           ═══════════════════════════════════════════════════════════════════════ */

        .screen-2 {
            width: 100%;
            min-height: calc(100vh - 140px);
            padding: 30px 40px;
            padding-top: 140px;
            margin-top: -120px;
        }

        .results-layout {
            display: flex;
            gap: 30px;
            max-width: 1800px;
            margin: 0 auto;
        }

        /* Grid de fichas (60%) */
        .results-grid-container {
            flex: 0 0 60%;
            max-width: 60%;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            padding: 10px;
        }

        .results-grid .result-card {
            height: calc((100vh - 220px) / 2);
            aspect-ratio: unset;
        }

        /* Infinite Scroll - Loader */
        .infinite-scroll-loader {
            display: none;
            justify-content: center;
            align-items: center;
            padding: 30px;
            width: 100%;
        }

        .infinite-scroll-loader.visible {
            display: flex;
        }

        .infinite-scroll-loader .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e0e0e0;
            border-top-color: #1a1a1a;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .infinite-scroll-end {
            display: none;
            justify-content: center;
            padding: 20px;
            color: #888;
            font-style: italic;
        }

        .infinite-scroll-end.visible {
            display: flex;
        }

        /* Mapa (40%) */
        .results-map-container {
            flex: 0 0 40%;
            max-width: 40%;
            position: sticky;
            top: 160px;
            height: calc(100vh - 190px);
            margin-bottom: 30px;
        }

        .results-map {
            width: 100%;
            height: 100%;
            background: #f0f0f0;
            border-radius: 16px;
            overflow: hidden;
        }

        .map-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #888;
            font-family: 'Spectral', Georgia, serif;
        }

        .map-placeholder-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .map-placeholder p {
            margin: 5px 0;
            font-size: 1.2rem;
        }

        .map-placeholder-note {
            font-size: 0.9rem !important;
            color: #aaa;
        }

        /* ═══════════════════════════════════════════════════════════════════════
           FICHA DE RESULTADO (basada en ficha-card_v3.html)
           ═══════════════════════════════════════════════════════════════════════ */

        /* 
    ╔═══════════════════════════════════════════════════════════╗
    ║ ⚠️ IMPORTANTE – NOTA PARA MIGRACIÓN A PHP / WORDPRESS     ║
    ╠═══════════════════════════════════════════════════════════╣
    ║ EXISTEN DOS DEFINICIONES DE `.result-card` EN ESTE ARCHIVO║
    ║                                                           ║
    ║ BLOQUE LEGACY (APROX. LÍNEAS 1081–1125):                  ║
    ║ • Diseño v1 (grid simple, bordes, fondo blanco)           ║
    ║ • ESTADO: OBSOLETO                                        ║
    ║ • NO MIGRAR A PHP                                         ║
    ║                                                           ║
    ║ BLOQUE ACTUAL (APROX. LÍNEAS 1747–1870):                  ║
    ║ • Diseño v3 (cards premium con overlay e imagen)          ║
    ║ • ESTADO: DEFINITIVO                                      ║
    ║ • ESTE ES EL BLOQUE QUE DEBE MIGRARSE A PHP               ║
    ║                                                           ║
    ║ Esta duplicidad es intencional en el borrador y queda     ║
    ║ resuelta con esta anotación para evitar ambigüedad        ║
    ║ durante la migración.                                     ║
    ╚═══════════════════════════════════════════════════════════╝
    */

        .result-card {
            --card-radius: 22px;
            --card-pad: 18px;
            
            width: 100%;
            aspect-ratio: 3 / 4;
            border-radius: var(--card-radius);
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            box-shadow: 0 14px 40px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.25);
        }

        /* Overlay blanco al 60% */
        .result-card::after {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(255,255,255,0.6);
            pointer-events: none;
        }

        /* Contenido de la ficha */
        .result-card-content {
            position: absolute;
            inset: 0;
            padding: var(--card-pad);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            gap: 10px;
            z-index: 1;
        }

        .result-card-title {
            font-family: 'Spectral', Georgia, serif;
            font-size: 1.4rem;
            font-weight: 700;
            line-height: 1.1;
            margin: 0;
            color: #000;
        }

        .result-card-line {
            font-family: 'Spectral', Georgia, serif;
            font-size: 0.9rem;
            font-weight: 400;
            line-height: 1.35;
            margin: 0;
            color: #000;
            opacity: 0.9;
        }

        /* ═══════════════════════════════════════════════════════
           FAVORITOS — VISIBILIDAD (UI)
           ═══════════════════════════════════════════════════════ */
        .fav-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 1px solid rgba(0,0,0,0.12);
            background: rgba(255,255,255,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #111;
            z-index: 5;
            box-shadow: 0 6px 16px rgba(0,0,0,0.18);
            transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
        }

        .fav-btn:hover {
            transform: scale(1.03);
            background: rgba(255,255,255,0.95);
            box-shadow: 0 8px 18px rgba(0,0,0,0.2);
        }

        .fav-btn:focus-visible {
            outline: 2px solid #111;
            outline-offset: 2px;
        }

        .fav-ico {
            width: 18px;
            height: 18px;
            fill: none;
            stroke: currentColor;
            stroke-width: 1.8;
        }

        .fav-btn.is-fav {
            color: #e53935;
        }

        .fav-btn.is-fav .fav-ico {
            fill: currentColor;
            stroke: none;
        }

        .destination-card {
            position: relative;
        }

        /* ═══════════════════════════════════════════════════════
           MOBILE BASE STRUCTURE (P0-MOBILE STEP 1)
           ═══════════════════════════════════════════════════════ */
        @media (max-width: 900px) {
            .screen-1 {
                height: auto;
                max-height: none;
                overflow-x: hidden;
                overflow-y: visible;
                display: flex;
                flex-direction: column;
            }

            .screen-1-content {
                flex: none;
                display: flex;
                flex-direction: column;
                overflow: visible;
                align-items: stretch;
                gap: 0;
            }

            .search-column {
                width: 100%;
                max-width: 100%;
                padding: 16px;
                padding-top: 16px;
                overflow: visible !important;
                order: 1;
            }

            .carousel-column {
                width: 100%;
                max-width: 100%;
                order: 2;
                min-height: 300px;
                padding: 16px;
            }

            .search-tabs {
                margin-bottom: 16px;
            }

            /* Asegurar que el área del buscador no recorta el dropdown */
            .search-column,
            .search-section,
            .search-input-wrapper {
                overflow: visible !important;
            }

            /* Crear contexto correcto para el dropdown absoluto */
            .search-input-wrapper {
                position: relative;
                z-index: 50;
            }

            /* El dropdown por encima de todo */
            .suggestions-dropdown {
                position: absolute;
                left: 0;
                right: 0;
                top: calc(100% + 8px);
                z-index: 9999;
                max-height: min(52dvh, calc(100dvh - 240px));
                overflow-y: auto;
                overscroll-behavior: contain;
                -webkit-overflow-scrolling: touch;
                padding-bottom: env(safe-area-inset-bottom);
                background: rgba(255, 255, 255, 0.78);
                border: 1px solid rgba(0,0,0,0.08);
                box-shadow: 0 10px 30px rgba(0,0,0,0.12);
                border-radius: 14px;
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }

            .suggestions-dropdown::before,
            .suggestions-dropdown::after {
                content: '';
                position: absolute;
                left: 0;
                right: 0;
                height: 36px;
                pointer-events: none;
                z-index: 3;
                border-radius: inherit;
            }

            .suggestions-dropdown::before {
                top: 0;
                background: linear-gradient(to bottom, rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0));
            }

            .suggestions-dropdown::after {
                bottom: 0;
                background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.75));
            }

            .suggestions-dropdown .mega-title {
                position: sticky;
                top: 0;
                z-index: 4;
                background: rgba(255, 255, 255, 0.85);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(0,0,0,0.08);
            }

            @supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
                .suggestions-dropdown {
                    background: rgba(255, 255, 255, 0.92);
                }
            }

            /* El carrusel por debajo del buscador (solo stacking, no tamaño) */
            .carousel-column {
                position: relative;
                z-index: 1;
            }

            .carousel-column {
                padding-top: 16px;
                --carousel-gutter: clamp(12px, 4vw, 20px);
                padding-left: var(--carousel-gutter);
                padding-right: var(--carousel-gutter);
                box-sizing: border-box;
                width: 100%;
                max-width: 100%;
                margin-left: auto;
                margin-right: auto;
                overflow: visible;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                gap: 10px;
                min-height: auto;
            }

            .carousel-title {
                position: static;
                transform: none;
                margin: 14px 0 10px;
                text-align: center;
                width: 100%;
                font-size: clamp(0.95rem, 3.2vw, 1.1rem);
            }

            .carousel-3d {
                --card-w: clamp(240px, 72vw, 320px);
                --card-h: clamp(180px, 54vw, 240px);
                width: 100%;
                max-width: 100%;
                box-sizing: border-box;
                height: auto;
                margin-top: 0;
                margin-left: auto;
                margin-right: auto;
            }

            .carousel-stack {
                width: min(var(--card-w), 100%);
                max-width: 100%;
                box-sizing: border-box;
                margin-left: auto;
                margin-right: auto;
            }

            .carousel-pagination {
                position: static;
                transform: none;
                margin: 10px 0 18px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 6px;
            }

            .carousel-dots {
                margin-top: 0;
            }

            .carousel-counter {
                margin-top: 0;
            }

            /* El buscador por encima (solo stacking) */
            .search-column {
                position: relative;
                z-index: 10;
            }

            /* PASO 3: Barra de título Screen 2 — layout móvil */
            .header-bar-results.visible {
                display: flex !important;
                flex-direction: column !important;
                align-items: stretch !important;
                gap: 8px !important;
                padding: 12px 16px !important;
            }

            .header-bar-results .breadcrumbs {
                order: 1;
                justify-self: auto !important;
                width: 100%;
            }

            .header-bar-results .breadcrumbs .crumbs-inner {
                white-space: normal;
                display: flex;
                flex-wrap: wrap;
                gap: 4px;
                align-items: center;
            }

            .header-bar-results .header-title-stack {
                order: 2;
                align-items: flex-start !important;
                text-align: left !important;
                width: 100%;
            }

            .header-bar-results .header-title-stack .page-title {
                position: static !important;
                transform: none !important;
                text-align: left !important;
                font-size: clamp(1.2rem, 4.5vw, 1.6rem) !important;
                max-width: 100% !important;
                width: 100% !important;
            }

            .header-bar-results .screen2-meta {
                text-align: left !important;
                width: 100%;
            }

            .header-bar-results .header-spacer {
                display: none !important;
            }

            /* PASO 4: Tabs e input — ajustes móvil */

            /* Ocultar tabs desktop también en ≤900px (no solo en ≤768px) */
            .search-tabs {
                display: none !important;
            }

            /* Mostrar selector móvil en ≤900px */
            .mobile-tab-selector {
                display: block !important;
                margin-bottom: 12px;
            }

            /* Reducir min-height de secondary-search */
            .secondary-search {
                min-height: auto !important;
                padding-top: 12px;
            }

            /* Textos de ayuda: tamaño más contenido */
            .search-help-text {
                font-size: clamp(0.95rem, 3.5vw, 1.25rem) !important;
                margin: 16px auto 12px !important;
                max-width: 100%;
            }

            /* Input: ajustar padding y placeholder */
            .keyword-input {
                padding: 14px 40px 14px 44px !important;
                font-size: 1rem !important;
            }

            .vw-buscador .search-input-wrapper .search-icon {
                left: 14px;
            }

            .vw-buscador .search-input-wrapper #searchInput.keyword-input {
                padding-left: 44px !important;
            }

            /* Botón limpiar: no solapar con borde */
            .clear-button {
                right: 8px;
            }

            /* Hint de teclado: ya oculto en 768px pero asegurar en 900px */
            .keyboard-hint {
                display: none !important;
            }

            /* Tab Fecha: instrucciones más compactas */
            .fecha-instructions {
                font-size: clamp(0.95rem, 3.5vw, 1.25rem) !important;
                margin: 16px auto 12px !important;
                max-width: 100%;
            }

            .fecha-instructions .fecha-line2 {
                white-space: normal !important;
            }

            /* PASO 5: Mapa plegable con toggle en móvil */

            /* Botón toggle visible solo en móvil */
            .map-toggle-btn {
                display: flex !important;
                align-items: center;
                justify-content: center;
                gap: 8px;
                width: 100%;
                padding: 14px 16px;
                background: white;
                border: 2px solid #0066cc;
                border-radius: 10px;
                font-family: inherit;
                font-size: 0.95rem;
                font-weight: 600;
                color: #0066cc;
                cursor: pointer;
                transition: all 0.2s ease;
                margin: 4px 0;
            }

            .map-toggle-btn:hover {
                background: #f0f7ff;
            }

            .map-toggle-btn:active {
                background: #e0efff;
            }

            .map-toggle-btn.is-open {
                background: #0066cc;
                color: white;
            }

            .map-toggle-icon {
                font-size: 1.1rem;
            }

            /* Mapa oculto por defecto en móvil */
            .vw-s2-right {
                max-height: 0 !important;
                overflow: hidden !important;
                transition: max-height 0.35s ease, opacity 0.3s ease;
                opacity: 0;
                padding: 0 !important;
                margin: 0 !important;
            }

            /* Mapa visible cuando toggle activo */
            .vw-s2-right.map-visible {
                max-height: 400px !important;
                opacity: 1;
                margin-top: 8px !important;
            }

            /* PASO 6: Fichas result-card en grid móvil — altura automática */
            .results-grid .result-card {
                height: auto !important;
                aspect-ratio: auto !important;
                min-height: 180px;
            }

            /* Título Screen 1 — sin absolute en móvil para evitar desborde */
            .header-bar:not(.header-bar-results) .page-title {
                position: static !important;
                transform: none !important;
                text-align: center !important;
                font-size: clamp(1.3rem, 4vw, 1.8rem) !important;
                max-width: 100% !important;
                width: 100% !important;
            }

            /* Header bar Screen 1: padding más compacto */
            .header-bar:not(.header-bar-results) {
                padding: 12px 16px 8px 16px !important;
                flex-direction: column !important;
                align-items: stretch !important;
                gap: 6px !important;
            }

            /* PARCHE 4A: Centrar título y resultados en barra Screen 2 */
            .header-bar-results .header-title-stack {
                align-items: center !important;
                text-align: center !important;
            }

            .header-bar-results .header-title-stack .page-title {
                text-align: center !important;
            }

            .header-bar-results .screen2-meta {
                text-align: center !important;
            }

            /* PARCHE 4B: Botón toggle mapa — visible y correctamente posicionado */
            .map-toggle-btn {
                display: flex !important;
                order: 10;
                margin: 12px 0 !important;
                width: 100% !important;
            }

            /* PARCHE 4C: El aside del mapa — transición correcta */
            .vw-s2-right {
                order: 11;
                width: 100% !important;
                max-height: 0 !important;
                overflow: hidden !important;
                opacity: 0;
                transition: max-height 0.35s ease, opacity 0.3s ease !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            .vw-s2-right.map-visible {
                max-height: 400px !important;
                opacity: 1;
                margin-top: 8px !important;
                overflow: hidden !important;
            }

            .vw-s2-right.map-visible .results-map-container {
                height: 40vh !important;
                min-height: 280px !important;
                max-height: 360px !important;
                overflow: hidden !important;
            }

            /* PARCHE 4D: Asegurar que el botón está DENTRO del flujo del layout */
            .results-layout.vw-s2-layout {
                display: flex !important;
                flex-direction: column !important;
            }

            .vw-s2-left {
                order: 1 !important;
            }

            /* PARCHE 5: Desbloquear input de búsqueda */

            /* Asegurar que Screen 1 y sus hijos permiten interacción */
            .screen-1,
            .screen-1-content,
            .search-column,
            .search-section,
            .secondary-search {
                pointer-events: auto !important;
                position: relative;
            }

            /* El input debe estar por encima de todo en su contexto */
            .search-input-wrapper {
                position: relative !important;
                z-index: 50 !important;
                pointer-events: auto !important;
            }

            #searchInput,
            .keyword-input {
                pointer-events: auto !important;
                -webkit-user-select: text !important;
                user-select: text !important;
                position: relative;
                z-index: 51 !important;
            }

            /* El carrusel NO debe bloquear nada del buscador */
            .carousel-column {
                pointer-events: auto;
                z-index: 1 !important;
            }

            /* El header-bar-results cuando está oculto no debe interferir */
            .header-bar-results:not(.visible) {
                pointer-events: none !important;
                position: absolute !important;
                width: 0 !important;
                height: 0 !important;
                overflow: hidden !important;
                opacity: 0 !important;
            }

            /* PARCHE 6: Mapa SIEMPRE visible en móvil — layout vertical fijo */

            /* Ocultar botón toggle — ya no se necesita */
            .map-toggle-btn {
                display: none !important;
            }

            /* Screen 2: ocupa todo el viewport restante bajo la barra de título */
            .screen-2 {
                width: 100% !important;
                max-width: 100% !important;
                padding: 0 !important;
                margin: 0 !important;
                overflow: hidden !important;
                height: calc(100dvh - var(--screen2-titlebar-h, 56px)) !important;
                max-height: calc(100dvh - var(--screen2-titlebar-h, 56px)) !important;
                box-sizing: border-box !important;
            }

            /* Layout: columna vertical, altura fija */
            .results-layout.vw-s2-layout {
                display: flex !important;
                flex-direction: column !important;
                gap: 0 !important;
                width: 100% !important;
                height: 100% !important;
                overflow: hidden !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            /* Fichas: 65% superior con scroll interno */
            .vw-s2-left {
                order: 1 !important;
                flex: 0 0 65% !important;
                width: 100% !important;
                max-width: 100% !important;
                height: 65% !important;
                min-height: 0 !important;
                overflow-y: auto !important;
                overflow-x: hidden !important;
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
                padding: 12px 16px !important;
                box-sizing: border-box !important;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .vw-s2-left::-webkit-scrollbar {
                display: none;
            }

            .results-grid-container {
                width: 100% !important;
                max-width: 100% !important;
                height: auto !important;
                overflow: visible !important;
                position: static !important;
                background: transparent !important;
                border-radius: 0 !important;
                padding: 0 !important;
            }

            .results-grid {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 12px !important;
                width: 100% !important;
                height: auto !important;
                overflow: visible !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            /* Mapa: 35% inferior, siempre visible, sin scroll */
            .vw-s2-right {
                order: 2 !important;
                flex: 0 0 35% !important;
                width: 100% !important;
                max-width: 100% !important;
                height: 35% !important;
                max-height: none !important;
                min-height: 0 !important;
                overflow: hidden !important;
                opacity: 1 !important;
                position: static !important;
                padding: 0 !important;
                margin: 0 !important;
                transition: none !important;
            }

            .vw-s2-right .results-map-container {
                width: 100% !important;
                height: 100% !important;
                max-width: 100% !important;
                max-height: 100% !important;
                overflow: hidden !important;
                position: static !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 0 !important;
            }

            .vw-s2-right .results-map,
            .vw-s2-right #resultsMap {
                width: 100% !important;
                height: 100% !important;
                overflow: hidden !important;
                border-radius: 0 !important;
            }

            .vw-s2-right .map-placeholder {
                width: 100% !important;
                height: 100% !important;
                overflow: hidden !important;
                border-radius: 0 !important;
            }

            /* PARCHE 7: Forzar layout 65/35 con selectores de alta especificidad */

            /* Bloquear scroll del body en Screen 2 móvil */
            body.vw-screen2-active {
                overflow: hidden !important;
                height: 100dvh !important;
            }

            /* Screen 2 root: altura fija = viewport menos barra título */
            body.vw-screen2-active .vw-buscador .screen-2,
            body.vw-screen2-active .vw-buscador #screen2 {
                height: calc(100dvh - var(--screen2-titlebar-h, 56px)) !important;
                max-height: calc(100dvh - var(--screen2-titlebar-h, 56px)) !important;
                overflow: hidden !important;
                padding: 0 !important;
                margin: 0 !important;
                box-sizing: border-box !important;
            }

            /* Layout flex column con altura fija */
            body.vw-screen2-active .vw-buscador #screen2 .results-layout {
                display: flex !important;
                flex-direction: column !important;
                height: 100% !important;
                width: 100% !important;
                overflow: hidden !important;
                gap: 0 !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            /* Fichas: 65% con scroll interno */
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-left {
                flex: 0 0 55% !important;
                height: 55% !important;
                min-height: 0 !important;
                overflow-y: auto !important;
                overflow-x: hidden !important;
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
                padding: 8px 16px !important;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-left::-webkit-scrollbar {
                display: none;
            }

            /* Grid de fichas dentro del scroll */
            body.vw-screen2-active .vw-buscador #screen2 .results-grid {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 12px !important;
                height: auto !important;
                overflow: visible !important;
            }

            /* Mapa: 35% inferior, siempre visible */
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right {
                flex: 0 0 45% !important;
                height: 45% !important;
                min-height: 0 !important;
                max-height: none !important;
                overflow: hidden !important;
                opacity: 1 !important;
                padding: 0 !important;
                margin: 0 !important;
                position: static !important;
                transition: none !important;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right .results-map-container {
                width: 100% !important;
                height: 100% !important;
                overflow: hidden !important;
                position: static !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 0 !important;
                max-height: none !important;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right .results-map,
            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right #resultsMap {
                width: 100% !important;
                height: 100% !important;
                border-radius: 0 !important;
            }

            body.vw-screen2-active .vw-buscador #screen2 .vw-s2-right .map-placeholder {
                width: 100% !important;
                height: 100% !important;
                border-radius: 0 !important;
            }

            /* Toggle oculto */
            body.vw-screen2-active .map-toggle-btn {
                display: none !important;
            }

            /* PARCHE 9: Centrar textos dentro de las fichas de resultado */
            body.vw-screen2-active .result-card .result-card-content {
                position: absolute !important;
                inset: 0 !important;
                top: 0 !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                text-align: center !important;
                padding: 16px !important;
            }

            /* PARCHE 10: Eliminar espacio vacío debajo del carrusel en Screen 1 */

            /* Screen 1: solo ocupa lo que necesita su contenido */
            .screen-1 {
                min-height: 0 !important;
                height: auto !important;
            }

            .screen-1-content {
                min-height: 0 !important;
                height: auto !important;
                padding-bottom: 24px !important;
            }

            /* Contenedor del buscador: altura automática */
            .vw-buscador {
                min-height: 0 !important;
            }

            /* Screen 2 oculto no debe generar espacio */
            .screen-2:not(.active),
            #screen2:not(.active) {
                display: none !important;
                height: 0 !important;
                min-height: 0 !important;
                overflow: hidden !important;
            }

            /* La zona del mapa cuando Screen 1 está activo: no generar espacio */
            .screen-1.active ~ .screen-2,
            .screen-1.active ~ #screen2 {
                display: none !important;
                height: 0 !important;
            }

            /* El carousel-column no necesita más altura */
            .carousel-column {
                margin-bottom: 0 !important;
                padding-bottom: 16px !important;
            }

            /* Search column: sin altura mínima */
            .search-column {
                min-height: 0 !important;
                height: auto !important;
            }

            /* El contenedor general no debe forzar 100vh en Screen 1 */
            body:not(.vw-screen2-active) .vw-buscador {
                height: auto !important;
                min-height: auto !important;
            }

            /* PARCHE 13: Fondo blanco simple, contenido fluye arriba (reemplaza PARCHE 11/12) */
            body:not(.vw-screen2-active) .vw-buscador {
                min-height: 100dvh !important;
                background: #fff !important;
            }

            body:not(.vw-screen2-active) .screen-1 {
                background: #fff !important;
            }
        }

        @media (max-width: 900px) and (max-height: 700px) {
            .suggestions-dropdown {
                max-height: min(52dvh, calc(100dvh - 240px));
            }
        }

        @media (max-width: 900px) and (max-height: 600px) {
            .suggestions-dropdown {
                max-height: min(52dvh, calc(100dvh - 240px));
            }
        }

                /* P0‑M3 v3 — Gutters laterales del carrusel en móvil (solo CSS) */
                @media (max-width: 900px) {
                    :root {
                        --carousel-gutter: clamp(12px, 4vw, 20px);
                    }

                    /* El contenedor del carrusel debe respetar márgenes */
                    .carousel-column {
                        padding-left: var(--carousel-gutter) !important;
                        padding-right: var(--carousel-gutter) !important;
                        box-sizing: border-box;
                    }

                    /* Asegurar que el stack no “se sale” del viewport */
                    .carousel-3d {
                        width: min(100%, calc(100vw - (2 * var(--carousel-gutter)))) !important;
                        max-width: min(100%, calc(100vw - (2 * var(--carousel-gutter)))) !important;
                        box-sizing: border-box;
                        margin-left: auto;
                        margin-right: auto;
                        --card-w: min(min(88vw, 360px), calc(100vw - (2 * var(--carousel-gutter))));
                    }

                    /* Si existe un wrapper tipo stack que fija ancho, forzarlo a encajar */
                    .carousel-stack {
                        width: min(var(--card-w), calc(100vw - (2 * var(--carousel-gutter)))) !important;
                        max-width: min(100%, calc(100vw - (2 * var(--carousel-gutter)))) !important;
                        box-sizing: border-box;
                        margin-left: auto;
                        margin-right: auto;
                    }

                    /* Evitar que alguna transformación provoque overflow horizontal */
                    .vw-buscador {
                        overflow-x: hidden;
                    }
                }

                /* P0-M4 v1 — Screen2 móvil en 1 columna (Resultados + Mapa) */
                @media (max-width: 900px) {
                    /* P0-M4 v2 — Screen2 móvil: apilado vertical, mapa abajo sin scroll propio */
                    .screen-2 {
                        width: 100%;
                        max-width: 100%;
                        min-height: auto;
                        padding: 16px;
                        margin-top: 0;
                        overflow: visible;
                        box-sizing: border-box;
                    }

                    .results-layout {
                        display: flex !important;
                        flex-direction: column !important;
                        gap: 16px;
                        align-items: stretch;
                        width: 100%;
                        max-width: 100%;
                        height: auto !important;
                        overflow: visible !important;
                        padding: 0;
                    }

                    .vw-s2-left {
                        width: 100% !important;
                        max-width: 100% !important;
                        flex: none !important;
                        height: auto !important;
                        overflow: visible !important;
                        position: static !important;
                        padding: 0 !important;
                    }

                    .results-grid-container {
                        flex: none !important;
                        max-width: 100% !important;
                        width: 100% !important;
                        height: auto !important;
                        overflow: visible !important;
                        position: static !important;
                        background: transparent !important;
                        border-radius: 0 !important;
                        padding: 0 !important;
                    }

                    .results-grid {
                        display: grid !important;
                        grid-template-columns: 1fr !important;
                        gap: 14px !important;
                        width: 100% !important;
                        max-width: 100% !important;
                        height: auto !important;
                        overflow: visible !important;
                        padding: 0 !important;
                        margin: 0 !important;
                    }

                    .vw-s2-right {
                        width: 100% !important;
                        max-width: 100% !important;
                        flex: none !important;
                        height: auto !important;
                        min-height: 0 !important;
                        overflow: hidden !important;
                        position: static !important;
                        top: auto !important;
                        margin: 0 !important;
                        padding: 0 !important;
                    }

                    .vw-s2-right .results-map-container {
                        flex: none !important;
                        max-width: 100% !important;
                        width: 100% !important;
                        height: 40vh !important;
                        min-height: 280px !important;
                        max-height: 360px !important;
                        overflow: hidden !important;
                        position: static !important;
                        top: auto !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        border-radius: 16px !important;
                    }

                    .vw-s2-right .results-map,
                    .vw-s2-right #resultsMap {
                        width: 100% !important;
                        height: 100% !important;
                        overflow: hidden !important;
                        border-radius: 16px !important;
                    }

                    .vw-s2-right .map-placeholder {
                        width: 100% !important;
                        height: 100% !important;
                        overflow: hidden !important;
                    }
                }

        /* ─────────────────────────────────────────────────────────────
           Ajustes finales: barra resultados + scroll + mobile
           ───────────────────────────────────────────────────────────── */
        .vw-buscador { --screen2-titlebar-h: 72px; }

        @media (max-width: 900px) {
            .vw-buscador { --screen2-titlebar-h: 56px; }
        }

        @media (max-width: 600px) {
            .vw-buscador { --screen2-titlebar-h: 52px; }
        }

        .vw-buscador {
            scroll-padding-top: var(--screen2-titlebar-h);
        }

        #screen2 {
            scroll-margin-top: var(--screen2-titlebar-h) !important;
        }

        .header-bar-results {
            min-height: var(--screen2-titlebar-h) !important;
        }

        /* padding-top override removed — handled by grid height calc */

                /* Bloque duplicado eliminado - el layout móvil se define en líneas 2463-2564 */

                /* WP OVERRIDE (Avada): permitir ancho completo como el prototipo HTML */
                body.page-template-page-buscador-php .vw-buscador {
                    width: 100vw !important;
                    max-width: 100vw !important;
                    margin-left: calc(50% - 50vw) !important;
                    margin-right: calc(50% - 50vw) !important;
                    overflow-x: hidden; /* evita scroll horizontal por el “escape” a 100vw */
                }

                /* Si el prototipo usa .container, Avada suele limitarlo: anulamos dentro del buscador */
                body.page-template-page-buscador-php .vw-buscador .container {
                    width: 100% !important;
                    max-width: none !important;
                }

/* WP-13: micro-transición (solo dentro del buscador) */
.vw-buscador .screen-1,
.vw-buscador .screen-2 {
    transition: opacity 180ms ease, transform 180ms ease;
}

.vw-buscador .vw-fade-out {
    opacity: 0;
    transform: translateY(-6px);
}

/* PASO 5: Botón toggle mapa — oculto en desktop */
.map-toggle-btn {
    display: none;
}

.vw-buscador .vw-fade-in {
    opacity: 0;
    transform: translateY(6px);
}

.vw-buscador .vw-fade-in.vw-show {
    opacity: 1;
    transform: none;
}

@media (prefers-reduced-motion: reduce) {
    .vw-buscador .screen-1,
    .vw-buscador .screen-2 {
        transition: none;
    }
}

/* WP-11: Centrar título principal (H1) sin afectar migas ni Screen 2 */
.vw-buscador h1.page-title,
.vw-buscador .page-title {
    display: block;
    width: 100%;
    text-align: center !important;
    margin-left: auto;
    margin-right: auto;
}

/* WP-11b: centrar H1 en la barra de Screen 1 sin mover migas */
.vw-buscador .header-bar:not(.header-bar-results) {
    position: relative;
}

.vw-buscador .header-bar:not(.header-bar-results) .page-title {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    max-width: 70%;
    width: max-content;
    text-align: center;
}

/* WP-12: Carrusel (Screen 1) — texto blanco y centrado */
.vw-buscador .carousel-3d .carousel-card-content,
.vw-buscador .carousel-card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.vw-buscador .carousel-3d .carousel-card-content h1,
.vw-buscador .carousel-3d .carousel-card-content h2,
.vw-buscador .carousel-3d .carousel-card-content h3,
.vw-buscador .carousel-3d .carousel-card-content h4,
.vw-buscador .carousel-3d .carousel-card-content h5,
.vw-buscador .carousel-3d .carousel-card-content h6,
.vw-buscador .carousel-3d .carousel-card-content p,
.vw-buscador .carousel-3d .carousel-card-content span,
.vw-buscador .carousel-3d .carousel-card-content small,
.vw-buscador .carousel-3d .carousel-card-content a,
.vw-buscador .carousel-card-content h1,
.vw-buscador .carousel-card-content h2,
.vw-buscador .carousel-card-content h3,
.vw-buscador .carousel-card-content h4,
.vw-buscador .carousel-card-content h5,
.vw-buscador .carousel-card-content h6,
.vw-buscador .carousel-card-content p,
.vw-buscador .carousel-card-content span,
.vw-buscador .carousel-card-content small,
.vw-buscador .carousel-card-content a {
    color: #fff;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.55);
}

/* WP-13: barra buscadora — texto gris medio (solo Screen 1) */
.vw-buscador #screen1 .search-tabs,
.vw-buscador #screen1 .tab-button,
.vw-buscador #screen1 .mobile-tab-button,
.vw-buscador #screen1 .mobile-tab-dropdown,
.vw-buscador #screen1 .search-input-wrapper,
.vw-buscador #screen1 #searchInput,
.vw-buscador #screen1 select,
.vw-buscador #screen1 .search-help-text,
.vw-buscador #screen1 .keyboard-hint {
    color: #666 !important;
}

.vw-buscador #screen1 #searchInput {
    font-size: calc(1rem + 3px) !important;
}

.vw-buscador #screen1 #searchInput::placeholder {
    color: #888 !important;
}

/* Mantener activo (tab seleccionado) */
.vw-buscador #screen1 .tab-button.active,
.vw-buscador #screen1 .tab-button.active .tab-count,
.vw-buscador #screen1 .mobile-tab-button.open {
    color: #1a73e8 !important;
}

/* WP-xx: Tab Fecha — igualar borde/halo de inputs del buscador */
.vw-buscador .date-search-controls .date-input {
    border: 1px solid var(--vw-accent);
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    background: #fff;
    transition: all 0.2s ease;
}

.vw-buscador .date-search-controls .date-input:focus,
.vw-buscador .date-search-controls .date-input:focus-visible {
    border-color: #1a73e8;
    outline: none;
    box-shadow: 0 4px 12px rgba(26, 115, 232, 0.15);
}

/* Halo en contenedor para asegurar visibilidad en Chrome */
.vw-buscador .date-search-controls .date-input-group:focus-within {
    box-shadow: none;
}


